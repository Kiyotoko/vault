<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"> 
<title>E-FELD</title>
     <meta name="description" content="E-Feld"> 
     <meta name="keywords" lang="de" content="E-Feld">
     <meta name="keywords" lang="en-us" content="Electric Fields"> 
     <meta name="keywords" lang="en" content="Electric Fields">
    <style>p{line-height: 1em;margin: 0;} 
        #menue1 li a {line-height: 2em;}
		#MyCanvas { border: 1px solid black; }
ul#menue1
{	margin: 0px 0px 0px 3px;
	padding: 3px;
	position: relative;
	width: 1000px;
	z-index: 30}

#menue1 li
{	margin: 0px;
	padding: 0px;
	list-style: none;
	float: left;
	font: bold 16px arial,Helvettica,sans-serif;}

#menue1 li a
{	display: block;
	margin: 0 1px 0 0;
	padding: 4px 10px;
	width: 120px;
	background: #3750b2;
	color: #FFF;
	text-align: center;
	text-decoration: none}

ul#menue1 li a:hover
{	background: #49A3FF}

#menue1 div
{	position: absolute;
	visibility: hidden;
	margin: 1;
	padding: 0;
	background: #EAEBD8;
	border: 1px solid #5970B2}

#menue1 div a
	{	position: relative;
		display: block;
		margin: 1;
		padding: 5px 10px;
		width: auto;
		white-space: nowrap;
		text-align: center;
		text-decoration: none;
		background: #EAEBD8;
		color: #2875DE;
		font: 14px arial}

#menue1 div a:hover
	{	background: #49A3FF;
		color: #FFF}
		
</style>
<script type="text/javascript"> <!--
var timeout = 500; closetimer = 0;  menuitem = 0; 
var itemid = "0";
var scale;
function mopen(id)	{	
	itemid = id;
	mcancelclosetime();		                                
	if(menuitem) menuitem.style.visibility = 'hidden';   
	menuitem = document.getElementById(id);	             
	menuitem.style.visibility = 'visible';
	}
function mclose()      {	 	
	if(menuitem) menuitem.style.visibility = 'hidden';	
	if(itemid == "m10") mopen('m1');	if(itemid == "m20") mopen('m2');	if(itemid == "m30") mopen('m3');
	if(itemid == "m40") mopen('m4');	if(itemid == "m50") mopen('m5');	if(itemid == "m60") mopen('m6');
	if(itemid == "m70") mopen('m7');	if(itemid == "m80") mopen('m8');	if(itemid == "m90") mopen('m9');
	}
function mclosetime()  	     { closetimer = window.setTimeout(mclose, timeout);	}
function mcancelclosetime()  { if(closetimer) {window.clearTimeout(closetimer); closetimer = null;}  	}
function idgeben(id) { 	itemid = id; }
function nix() { }
document.onclick = mclose;    
window.addEventListener("resize", zoom);
function zoom(){
    var maxWidth = document.getElementById("wrapper").offsetWidth;
	var width = document.body.clientWidth;
    var maxHeight = document.getElementById("wrapper").offsetHeight;
	var height = window.innerHeight;
	var scaleW = width/maxWidth;
	var scaleH = height/maxHeight;
    if(scaleH<=scaleW){scale=scaleH}else{scale=scaleW}
   if(width >= maxWidth & height >= maxHeight)
    {scale=1;
    document.getElementById("wrapper").style.transform = "scale(1)";
    document.getElementById("wrapper").style.WebkitTransform = "scale(1)";
    document.body.style.transform = "scale(1)";
    document.body.style.WebkitTransform = "scale(1)";}
	else {scale=scale.toFixed(2);
        document.body.style.transform = "scale("+scale+")";
        document.body.style.WebkitTransform = "scale("+scale+")";
		} 
	}
var m0EFeld = " E - F E L D "
var m1Ladungen = "Ladungen";
function CreateArray2D(e){for(var a=[],t=0;e>t;t++)a[t]=[];return a}
function CreateObjectArray2D(e,a,t){for(var n=[],l=0;a>l;l++){n[l]=new Array(e);for(var _=0;e>_;_++)n[l][_]=new t}
return n}
function init(){var e=document.getElementById("MyCanvas");_width=e.width,_height=e.height,_rand=-10,_bildschirm_xmax_rand=1e3-_rand,_bildschirm_ymax_rand=700-_rand,_maxladungszahl=151,l_radius=9,l_x=[],l_y=[],l_wert=[],l_string=[],l_nr=[],l_anzahl=0,l_max_anzahl=151,xDelta=20,yDelta=20,_o_punkte=!0,opunkte_zeichnen(_o_punkte),_Ke=1/(4*Math.PI*8.854187e-12)*1.602176565e-19*1e3*1e6,Fangabstand_x=10,Fangabstand_y=10,_Sektor_frei=CreateArray2D(151),_Emax=5e5,farbflag=!0,_flag_nichtueberlagern=!0,farbsw=.001,farbsw4=farbsw/4,farbsw16=farbsw/16,farbsw64=farbsw/64,farbsw256=farbsw/256,farbsw1024=farbsw/1024,farbsw4096=farbsw/4096,farbsw13=farbsw256/32,farb_p0=.016,EE=0,EEx=0,EEy=0,x_akt=0,y_akt=0,_Grobfaktor1=1,_Grobfaktor2=.5,_Punktzahl_max=3500,_linienzahl_max=12,_Winkel=0,_ladungsnr=0,_liniennr=_linienzahl_max,_ldg_vorzeichen=-1,_d=1,_p_abst=2,_p_abst2=3,_Grenzzahl=2500,_3D_Flag=!1,_dist=10,pot_Grenze=3e3,maxxx=Math.round(_width/_dist),maxyy=Math.round(_height/_dist),__w1=10,__w2=20,xytransform0=10,xytransform1=16,xytransform2=1,xytransform3=1,xz=Math.round(_width/2),yz=Math.round(_height/2),farb_p02=2500*farb_p0*2,y_Aug=3e3,_flag_nichtueberlagern=!0}
function pot3D_0(e,a){__w1=e,__w2=a,pot3D(__w1,__w2)}
function pot3D_var(e,a){__w1+=e,__w2+=a,__w1<-15&&(__w1=-15),__w1>70&&(__w1=70),__w2<-20&&(__w2=-20),__w2>50&&(__w2=50),pot3D(__w1,__w2)}
function pot3D(e,a){function t(e){for(var a=0;a<ym-1;a++)e[h][a].PotWert=0,e[h][a].xx=1,e[h][a].yy=1;e[h][0].PotWert=-500,e[h][1].PotWert=500,e[h][2].PotWert=-100,e[h][3].PotWert=-100,e[h][3].xx=h-3,e[h][4].PotWert=-100,e[h][5].PotWert=-100,e[h][5].yy=ym-3,e[h][6].PotWert=-200,e[h][7].PotWert=-200,e[h][7].xx=h-3,e[h][8].PotWert=-200,e[h][9].PotWert=-200,e[h][9].yy=ym-3}
function n(e,a,t,n){var l=document.getElementById("MyCanvas"),_=l.getContext("2d");_.lineWidth=1,_.strokeStyle="#999",_.beginPath(),_.moveTo(e,a),_.lineTo(t,n),_.closePath(),_.stroke()}
function l(e){var a,t,n=0;t=0;for(var l=0;l<maxxx;l++){a=0;for(var _=0;_<maxyy;_++)n=Potential4(t,a),n=5e3*n,n<-pot_Grenze&&(n=-pot_Grenze),n>pot_Grenze&&(n=pot_Grenze),e[l+2][_+2].PotWert=-Math.round(n),e[l+2][_+2].xx=l+2,e[l+2][_+2].yy=_+2,a+=_dist;t+=_dist}
for(var r=0;2>r;r++)
for(var i=0;h-1>i;i++)e[i][r].PotWert=0,e[i][r].xx=i,e[i][r].yy=r+1;for(var r=0;r<ym-1;r++)
for(var i=0;2>i;i++)e[i][r].PotWert=0,e[i][r].xx=i+1,e[i][r].yy=r;for(var r=0;r<ym-1;r++)
for(var i=h-2;h>i;i++)e[i][r].PotWert=0,e[i][r].xx=i-1,e[i][r].yy=r;for(var r=ym-3;r<ym-1;r++)
for(var i=0;h-1>i;i++)e[i][r].PotWert=0,e[i][r].xx=i,e[i][r].yy=r-1;e[0][0].xx=1,e[0][0].yy=1,e[1][0].xx=1,e[1][0].yy=1,e[h-2][0].xx=h-3,e[h-2][0].yy=1,e[h-3][0].xx=h-3,e[h-3][0].yy=1}
function _(e,a,t,n,l,_,i,o,d){var s=document.getElementById("MyCanvas"),h=s.getContext("2d"),f=1;0>d&&(f=-1),h.lineWidth=1,h.strokeStyle="#000",isNaN(d)?h.fillStyle="#FFA":h.fillStyle=r(d,f),h.beginPath(),h.moveTo(e,a),h.lineTo(t,n),h.lineTo(l,_),h.lineTo(i,o),h.closePath(),h.fill(),h.stroke()}
function r(e,a){var t,n,l=256,_=[4];return _[0]=0,_[1]=0,_[2]=0,_[3]=1,t=Math.round(Math.log(farb_p0/Math.abs(e/2e4))/Math.LN2*48),t>232&&(t=232),96>t&&(t=96),a>0&&(_[0]=l,_[1]=t,_[2]=t),0>a&&(_[2]=l,_[0]=t,_[1]=t),n=" rgba("+_[0]+" , "+_[1]+" , "+_[2]+" , "+_[3]+") "}
_flag_nichtueberlagern=!0;var i,o;_3D_Flag=!0;var d=0,s=0,h=maxxx+4;ym=maxyy+4;var f=Math.round(h/2),y=Math.round(ym/2);i=Math.PI/180*10,o=Math.PI/180*20,i=Math.PI/180*e,o=Math.PI/180*a,pkt=new Object,pkt.x_Wert=0,pkt.y_Wert=0,pkt.z_Wert=0,pkt.x_Bild=0,pkt.y_Bild=0,pkt.PotWert=0;for(var u=CreateArray2D(h+1),x=0;h+1>x;x++)
for(var c=0;c<ym;c++)u[x][c]=new Object;l(u),t(u),feld_leeren();for(var x=0;h+1>x;x++)
for(var c=0;c<ym;c++)ii=x-f,jj=c-y,u[x][c].x_Wert=((u[x][c].xx-f)*Math.cos(i)-(u[x][c].yy-y)*Math.sin(i))*xytransform0,d=((u[x][c].xx-f)*Math.sin(i)+(u[x][c].yy-y)*Math.cos(i))*xytransform1,u[x][c].y_Wert=(d*Math.cos(o)-u[x][c].PotWert*Math.sin(o))*xytransform2,u[x][c].z_Wert=(d*Math.sin(o)+u[x][c].PotWert*Math.cos(o))*xytransform3,s=y_Aug/(y_Aug-u[x][c].y_Wert),u[x][c].x_Bild=Math.round(u[x][c].x_Wert*s+xz),u[x][c].y_Bild=Math.round(u[x][c].z_Wert*s+yz);for(var c=0;9>c;c+=2)n(u[h][c].x_Bild,u[h][c].y_Bild,u[h][c+1].x_Bild,u[h][c+1].y_Bild);for(var c=0;2>c;c++)
for(var x=0;h-1>x;x++)_(u[x][c].x_Bild,u[x][c].y_Bild,u[x+1][c].x_Bild,u[x+1][c].y_Bild,u[x+1][c+1].x_Bild,u[x+1][c+1].y_Bild,u[x][c+1].x_Bild,u[x][c+1].y_Bild,"grau");for(var c=0;c<ym-4;c++)
for(var x=0;2>x;x++)_(u[x][c].x_Bild,u[x][c].y_Bild,u[x+1][c].x_Bild,u[x+1][c].y_Bild,u[x+1][c+1].x_Bild,u[x+1][c+1].y_Bild,u[x][c+1].x_Bild,u[x][c+1].y_Bild,"grau");for(var c=0;c<ym-3;c++)
for(var x=h-3;h-1>x;x++)_(u[x][c].x_Bild,u[x][c].y_Bild,u[x+1][c].x_Bild,u[x+1][c].y_Bild,u[x+1][c+1].x_Bild,u[x+1][c+1].y_Bild,u[x][c+1].x_Bild,u[x][c+1].y_Bild,"grau");for(var c=2;c<ym-4;c++)
for(var x=2;h-3>x;x++)_(u[x][c].x_Bild,u[x][c].y_Bild,u[x+1][c].x_Bild,u[x+1][c].y_Bild,u[x+1][c+1].x_Bild,u[x+1][c+1].y_Bild,u[x][c+1].x_Bild,u[x][c+1].y_Bild,-u[x+1][c+1].PotWert);for(var c=ym-4;c<ym-1;c++)
for(var x=1;h-2>x;x++)_(u[x][c].x_Bild,u[x][c].y_Bild,u[x+1][c].x_Bild,u[x+1][c].y_Bild,u[x+1][c+1].x_Bild,u[x+1][c+1].y_Bild,u[x][c+1].x_Bild,u[x][c+1].y_Bild,"grau")}
function Potential4(e,a){for(var t=0,n=0,l=0,_=0,r=0;r<l_anzahl;r++)n=e-l_x[r],l=a-l_y[r],_=Math.sqrt(n*n+l*l),_<_dist?(l_wert[r]>0&&(t=pot_Grenze),l_wert[r]<0&&(t=-pot_Grenze)):t+=l_wert[r]/_;return t}
function Potential2(e,a){for(var t=0,n=0,l=0,_=0,r=!1,i=0;i<l_anzahl;i++)n=e-l_x[i],l=a-l_y[i],_=Math.sqrt(n*n+l*l),9>_?r=!0:t+=l_wert[i]/_;return r&&(t=0),t}
function Potential3(e,a){for(var t=0,n=0,l=0,_=0,r=0;r<l_anzahl;r++)n=e-l_x[r],l=a-l_y[r],_=Math.sqrt(n*n+l*l),t+=l_wert[r]/_;return t}
function Potentialfeld(e){if(_flag_nichtueberlagern=!0,_3D_Flag&&(_3D_Flag=!1,l_alles_zeichnen()),0!=l_anzahl){var a=document.getElementById("MyCanvas");a.onmousedown=function(e){};var t=a.width,n=a.height,l=a.getContext("2d"),_=0,r=1;_p_abst=e,_p_abst2=e,l.lineWidth=2;for(var i=2;t-1>i;i+=_p_abst)
for(var o=2;n-1>o;o+=_p_abst2)_=Potential2(i,o),0!=_&&(_>0&&(r=1),0>_&&(r=-1),l.beginPath(),l.strokeStyle=farbe_p(_,r),l.moveTo(i,o),l.lineTo(i+1,o),l.closePath(),l.stroke());for(var o=0;o<l_anzahl;o++)l_zeichnen(o)}}
function farbe_p(e,a){var t,n,l=256,_=[4];return _[0]=0,_[1]=0,_[2]=0,_[3]=1,a>0&&(_[0]=l,t=32*Math.round(Math.log(farb_p0/e)/Math.LN2),t>256&&(t=256),_[1]=t,_[2]=t),0>a&&(_[2]=l,t=32*Math.round(Math.log(-1*farb_p0/e)/Math.LN2),t>256&&(t=256),_[0]=t,_[1]=t),n=" rgba("+_[0]+" , "+_[1]+" , "+_[2]+" , "+_[3]+") "}
function Potlinie(e,a){var t,n=new Array(9),l=new Array(9),_=1;if(0!=l_anzahl){for(var r=1;r<l_anzahl;r++)
if(Math.abs(e-l_x[r])<7&&Math.abs(a-l_y[r])<7)return;n[0]=Potential3(e,a),n[0]<0&&(_=-1),n[1]=Potential3(e,a-1),n[2]=Potential3(e-1,a-1),n[3]=Potential3(e-1,a),n[4]=Potential3(e-1,a+1),n[5]=Potential3(e,a+1),n[6]=Potential3(e+1,a+1),n[7]=Potential3(e+1,a),n[8]=Potential3(e+1,a-1);for(var r=1;9>r;r++)l[r]=Math.abs(n[0]-n[r]);t=1;for(var r=2;9>r;r++)l[r]<l[t]&&(t=r);1==t&&(rx=0,ry=-1),2==t&&(rx=-1,ry=-1),3==t&&(rx=-1,ry=0),4==t&&(rx=-1,ry=1),5==t&&(rx=0,ry=1),6==t&&(rx=1,ry=1),7==t&&(rx=1,ry=0),8==t&&(rx=1,ry=-1),0==P_Linie_zeichnen(e,a,rx,ry,farbe_p(n[0],_))&&P_Linie_zeichnen(e,a,-rx,-ry,farbe_p(n[0],_))}}
function P_Linie_zeichnen(e,a,t,n,l){var _,r=1,i=!0,o=new Array(7),d=new Array(7),s=e+t,h=a+n,f=t,y=n,u=document.getElementById("MyCanvas"),x=u.getContext("2d");x.strokeStyle=l,x.beginPath(),x.moveTo(e,a),x.lineTo(e+1,a),x.moveTo(s,h),x.lineTo(s+1,h),x.closePath(),x.stroke(),o[0]=Potential3(e,a);do{if(0!==f&&0!==y){o[1]=Potential2(s+f,h+y),o[2]=Potential2(s,h+y),o[3]=Potential2(s-f,h+y),o[4]=Potential2(s+f,h),o[5]=Potential2(s+f,h-y);for(var c=1;6>c;c++)d[c]=Math.abs(o[0]-o[c]);_=1;for(var g=2;6>g;g++)d[g]<d[_]&&(_=g);2==_&&(f=0),3==_&&(f=-f),4==_&&(y=0),5==_&&(y=-y)}else{if(0==f){o[1]=Potential2(s,h+y),o[2]=Potential2(s+1,h+y),o[3]=Potential2(s-1,h+y);for(var v=1;4>v;v++)d[v]=Math.abs(o[0]-o[v]);_=1;for(var b=2;4>b;b++)d[b]<d[_]&&(_=b);2==_&&(f=1),3==_&&(f=-1)}
if(0==y){o[1]=Potential3(s+f,h),o[2]=Potential3(s+f,h+1),o[3]=Potential3(s+f,h-1);for(var m=1;4>m;m++)d[m]=Math.abs(o[0]-o[m]);_=1;for(var z=2;4>z;z++)d[z]<d[_]&&(_=z);2==_&&(y=1),3==_&&(y=-1)}}
s+=f,h+=y,x.beginPath(),x.moveTo(s,h),x.lineTo(s+1,h),x.closePath(),x.stroke(),r++}while((s!=e||h!=a)&&r<_Grenzzahl);return r>=_Grenzzahl?i=!1:void(x.strokeStyle="#000")}
function Richtungsfeld(){_flag_nichtueberlagern=!0,_3D_Flag&&(_3D_Flag=!1,l_alles_zeichnen());var e=0,a=0,t=11,n=!1;if(0!=l_anzahl){var l=document.getElementById("MyCanvas"),_=l.width,r=l.height,i=xDelta,o=yDelta;do{do{for(var d=0;d<l_anzahl;d++)Math.abs(i-l_x[d])<9&&Math.abs(o-l_y[d])<9&&(n=!0),l_wert[d]<0&&Math.abs(i-l_x[d])<20&&Math.abs(o-l_y[d])<20&&(n=!0);0==n&&(feldst_berechnen(i,o),e=EEx/EE,a=EEy/EE,faehnchen_zeichnen(i,o,e,a,i+t*e,o+t*a,farbe(EE))),n=!1,i+=xDelta}while(_>i);i=xDelta,o+=yDelta}while(r>o)}}
function faehnchen_zeichnen(e,a,t,n,l,_,r){var i=document.getElementById("MyCanvas");i.onmousedown=function(e){};var o=i.getContext("2d");o.beginPath(),o.strokeStyle=" rgba("+r[1]+" , "+r[2]+" , "+r[3]+" , "+r[4]+") ",o.arc(e,a,2,0,2*Math.PI,!1),o.moveTo(Math.round(e+3*t),Math.round(a+3*n)),o.lineTo(Math.round(l),Math.round(_)),o.closePath(),o.stroke()}
function startpkt_Neue_Feldlinie(){var e=0;for(_ldg_vorzeichen=1,l_wert[_ladungsnr]<0&&(_ldg_vorzeichen=-1);0==_Sektor_frei[_ladungsnr][_liniennr]||_liniennr>=_linienzahl_max;)
if(_liniennr+=1,_liniennr>=_linienzahl_max){if(_liniennr=0,_ladungsnr+=1,_ladungsnr>=l_anzahl)return;_ldg_vorzeichen=1,l_wert[_ladungsnr]<0&&(_ldg_vorzeichen=-1)}
e=l_radius+2,x_akt=l_x[_ladungsnr]+e*Math.cos(2*Math.PI*_liniennr/_linienzahl_max+_Winkel),y_akt=l_y[_ladungsnr]+e*Math.sin(2*Math.PI*_liniennr/_linienzahl_max+_Winkel),feldst_berechnen(x_akt,y_akt),_Sektor_frei[_ladungsnr][_liniennr]=!1}
function sektor_belegen(e){for(var a,t,n,l,_=l_radius+1,r=0;r<l_anzahl;r++)
for(var i=0;i<_linienzahl_max;i++)a=l_x[r]+Math.round(_*Math.cos(6.28*i/_linienzahl_max+_Winkel)),t=l_y[r]+Math.round(_*Math.sin(6.28*i/_linienzahl_max+_Winkel)),n=x_akt-a,l=y_akt-t,18>n*n+l*l&&(_Sektor_frei[r][i]=!1)}
function punkt_zeichnen(e){var a=Math.round(x_akt),t=Math.round(y_akt),n=document.getElementById("MyCanvas"),l=n.getContext("2d");l.fillStyle=" rgba("+e[0]+" , "+e[1]+" , "+e[2]+" , "+e[3]+") ",l.fillRect(a,t,1,1)}
function pkt_distanz_festlegen(){_d=_ldg_vorzeichen*(_Grobfaktor2/EE)}
function farbflag_setzen(){return farbflag?void(farbflag=!1):void(farbflag=!0)}
function farbe(e){var a=0,t=126,n=160,l=218,_=256,r=[4];return r[0]=0,r[1]=0,r[2]=0,r[3]=1,farbflag&&(e<farbsw&&(r[0]=l,r[1]=a,r[2]=n),e<farbsw4&&(r[0]=n,r[1]=a,r[2]=_),e<farbsw16&&(r[0]=t,r[1]=t,r[2]=l),e<farbsw64&&(r[0]=l,r[1]=n,r[2]=l),e<farbsw256&&(r[0]=l,r[1]=n,r[2]=n),e<farbsw1024&&(r[0]=n,r[1]=n,r[2]=n),e<farbsw4096&&(r[3]=.5)),r}
function folgepkt_bestimmen(){var e,a,t,n,l,_,r,i;pkt_distanz_festlegen(),e=EEx*_d,l=EEy*_d,feldst_berechnen(x_akt+e/2,y_akt+l/2),a=EEx*_d,_=EEy*_d,feldst_berechnen(x_akt+a/2,y_akt+_/2),t=EEx*_d,r=EEy*_d,feldst_berechnen(x_akt+t,y_akt+r),n=EEx*_d,i=EEy*_d,dx=(e+2*a+2*t+n)/6,x_akt+=dx,dy=(l+2*_+2*r+i)/6,y_akt+=dy}
function Feldlinien(){_flag_nichtueberlagern=!0,_3D_Flag&&(_3D_Flag=!1,l_alles_zeichnen()),maus_ausschalten();var e,a,t=!0,n=0;if(0==l_anzahl)return void alert("keine Ladungen !!");for(var l=0;l<l_anzahl;l++)
for(var _=0;_<_linienzahl_max;_++)_Sektor_frei[l][_]=!0;for(SektorMinAbstand=12,_ladungsnr=0,_liniennr=0;_ladungsnr<l_anzahl-1||_liniennr<_linienzahl_max;){for(startpkt_Neue_Feldlinie(),n=0,t=!0;t&&EE>farbsw13&&n<_Punktzahl_max&&x_akt>_rand&&x_akt<_bildschirm_xmax_rand&&y_akt>_rand&&y_akt<_bildschirm_ymax_rand&&_ladungsnr<l_anzahl;){punkt_zeichnen(farbe(EE)),folgepkt_bestimmen(),n+=1;for(var l=0;l<l_anzahl;l++)e=l_x[l]-x_akt,a=l_y[l]-y_akt,(81>e*e+a*a||EE>_Emax)&&(t=!1,sektor_belegen())}
_liniennr+=1}}
function linie_starten(e,a){_flag_nichtueberlagern=!0,_3D_Flag&&(_3D_Flag=!1,l_alles_zeichnen());var t,n,l,_,r=document.getElementById("MyCanvas");r.onmousedown=function(i){var o=getMousePos(r,i);t=o.x,t/=scale,n=o.y,n/=scale,e?(l=Math.round(t/Fangabstand_x)*Fangabstand_x,_=Math.round(n/Fangabstand_y)*Fangabstand_y):(l=t,_=n);for(var d=0;d<l_anzahl;d++)Math.abs(l-l_x[d])>l_radius&&Math.abs(_-l_y[d])>l_radius&&("Feldlinie"==a&&Einzellinie(l,_),"Potlinie"==a&&Potlinie(l,_))}}
function Einzellinie(e,a){var t,n,l=!0,_=0;if(0==l_anzahl)return void alert("keine Ladungen !!");for(_ldg_vorzeichen=1;_ldg_vorzeichen>-2;){for(x_akt=e,y_akt=a,_=0,l=!0,feldst_berechnen(x_akt,y_akt);l&&EE>farbsw13&&_<_Punktzahl_max&&x_akt>_rand&&x_akt<_bildschirm_xmax_rand&&y_akt>_rand&&y_akt<_bildschirm_ymax_rand&&_ladungsnr<l_anzahl;){punkt_zeichnen(farbe(EE)),folgepkt_bestimmen(),_+=1;for(var r=0;r<l_anzahl;r++)t=l_x[r]-x_akt,n=l_y[r]-y_akt,(81>t*t+n*n||EE>_Emax)&&(l=!1)}
_ldg_vorzeichen+=-2}}
function getMousePos(e,a){var t=e.getBoundingClientRect();return{x:a.clientX-t.left,y:a.clientY-t.top}}
function feldst_berechnen(e,a){var t,n,l,_,r,i;EEx=0,EEy=0;for(var o=0;o<l_anzahl;o++)t=e-l_x[o],n=a-l_y[o],l=t*t+n*n,_=Math.pow(l,1.5),r=_Ke*l_wert[o]*t/_,i=_Ke*l_wert[o]*n/_,EEx+=r,EEy+=i;EE=Math.sqrt(EEx*EEx+EEy*EEy)}
function l_erzeug(e,a,t,n){var l=" ";str2=" ";var _=1;l_x[e]=a,l_y[e]=t,l_wert[e]=n,l_wert[e]>0&&(l_string[e]="+"),l_wert[e]<0&&(l_string[e]="-"),_=Math.abs(l_wert[e]),_>1&&(l=String(_),str2=l.concat(l_string[e]),l_string[e]=str2),l_anzahl+=1}
function l_Aufstocken(e,a,t,n){var l=" ",_=" ",r=1;Math.abs(l_wert[e])<9&&(l_wert[e]+=n),l_wert[e]>0&&(l_string[e]="+"),l_wert[e]<0&&(l_string[e]="-"),r=Math.abs(l_wert[e]),r>1&&(l=String(r),_=l.concat(l_string[e]),l_string[e]=_),0==l_wert[e]&&l_loeschen(e)}
function l_loeschen(e){l_wert[e]=0,l_zeichnen(e),l_anzahl-=1,l_x[e]=l_x[l_anzahl],l_y[e]=l_y[l_anzahl],l_wert[e]=l_wert[l_anzahl],l_string[e]=l_string[l_anzahl],l_alles_zeichnen()}
function l_zeichnen(e){var a="red",t="black";0==l_wert[e]&&(a="white",t="white"),l_wert[e]>0&&(a="red"),l_wert[e]<0&&(a="cyan");var n=document.getElementById("MyCanvas"),l=n.getContext("2d");l.beginPath(),l.arc(l_x[e],l_y[e],l_radius,0,2*Math.PI,!0),l.fillStyle=a,l.fill(),l.lineWidth=1,l.strikeStyle=t,l.stroke(),l.closePath(),l.font="9pt Arial",l.textAlign="center",l.fillStyle=t,l.fillText(l_string[e],l_x[e],l_y[e]+l_radius/2)}
function l_alles_zeichnen(e){"neu"==e&&(_flag_nichtueberlagern=!0);var a=document.getElementById("MyCanvas"),t=a.width,n=a.height,l=a.getContext("2d");if(_flag_nichtueberlagern&&l.clearRect(0,0,t,n),opunkte_zeichnen(_o_punkte),l_anzahl>0)
for(var _=0;_<l_anzahl;_++)l_zeichnen(_)}
function feld_leeren(){var e=document.getElementById("MyCanvas");e.onmousedown=function(e){};var a=e.width,t=e.height,n=e.getContext("2d");n.clearRect(0,0,a,t)}
function l_neukonfig(){_flag_nichtueberlagern=!0,maus_ausschalten(),l_anzahl=0,l_alles_zeichnen()}
function maus_ausschalten(){var e=document.getElementById("MyCanvas");e.onmousedown=function(e){}}
function ueberlagern(){_flag_nichtueberlagern=!1,farbflag_setzen()}
function l_post(e){l_alles_zeichnen();var a,t,n,l,_=document.getElementById("MyCanvas"),r=!0;_.onmousedown=function(i){var o=getMousePos(_,i);a=o.x,a/=scale,t=o.y,t/=scale,n=Math.round(a/Fangabstand_x)*Fangabstand_x,l=Math.round(t/Fangabstand_y)*Fangabstand_y;for(var d=0;d<l_anzahl;d++)Math.abs(n-l_x[d])<2*l_radius&&Math.abs(l-l_y[d])<2*l_radius&&(r=!1,Math.abs(n-l_x[d])<l_radius+1&&Math.abs(l-l_y[d])<l_radius+1&&(l_Aufstocken(d,n,l,e),l_alles_zeichnen(d)));r&&l_anzahl<l_max_anzahl&&(l_erzeug(l_anzahl,n,l,e),l_zeichnen(l_anzahl-1)),r=!0},_.onmouseup=function(e){a=null,t=null}}
function ldg_loeschen(){l_alles_zeichnen();var e,a,t,n,l=document.getElementById("MyCanvas");l.onmousedown=function(_){var r=getMousePos(l,_);e=r.x,e=e/scale;a=r.y,a=a/scale;t=Math.round(e/Fangabstand_x)*Fangabstand_x,n=Math.round(a/Fangabstand_y)*Fangabstand_y;for(var i=0;i<l_anzahl;i++)Math.abs(t-l_x[i])<l_radius+1&&Math.abs(n-l_y[i])<l_radius+1&&(l_loeschen(i),l_alles_zeichnen())},l.onmouseup=function(t){e=null,a=null}}
function opunkte_zeichnen(e){var a=document.getElementById("MyCanvas"),t=a.width,n=a.height,l=a.getContext("2d"),_=xDelta,r=yDelta;do{do l.beginPath(),l.fillStyle="rgb(110, 110, 110)",l.moveTo(_,r),l.lineTo(_+1,r),l.closePath(),l.stroke(),_+=xDelta;while(t>_);_=xDelta,r+=yDelta}while(n>r)}
function maus_feldstaerke(){_flag_nichtueberlagern=!0;var e=document.getElementById("MyCanvas"),a=e.getContext("2d"),t=100,n=100;e.onmousedown=function(e){},e.addEventListener("mousemove",function(l){var _=getMousePos(e,l);t=_.x,t/=scale,n=_.y,n/=scale,feldst_berechnen(t,n),a.clearRect(0,0,300,20),a.font="10pt Arial",a.textAlign="left",a.fillStyle="blue",a.fillText("E = "+EE.toPrecision(6)+" V/m",3,15)},!1)}
function nix(){}
function draw2(){var e=document.getElementById("MyCanvas");if(e.getContext){var a=e.getContext("2d");a.fillStyle="green",a.fillRect(0,0,e.width,e.height),a.font="italic 36px/2 Unknown Font, sans-serif",a.fillStyle="red",a.fillRect(50,50,100,100),a.fillStyle="white",a.fillText("nr2",10,50)}}
function draw(){var e=document.getElementById("MyCanvas");if(e.getContext){var a=e.getContext("2d");a.font="italic 36px/2 Unknown Font, sans-serif",a.fillStyle="blue",a.fillRect(0,0,e.width,e.height),a.fillStyle="white",a.fillText("Hello World",e.width/2,.8*e.height),a.fillText("txt",10,50)}}	
</script>

</head>
<body onload = 'init(); zoom()' style=" transform-origin: top left;-webkit-transform-origin: top left;" >
<div id="wrapper" style="width:1004px; position: relative; margin:auto; transform-origin: top left;-webkit-transform-origin: top left;">
<ul id="menue1">
	<li><a href="#" id="m00" onclick="idgeben('m00')" onmouseover="mopen('m0')" onmouseout="mclosetime()"> E - F E L D </a> 
		<div id="m0" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
		<p style="text-align: center"><br/>Autor:<br/>
		R. Girwidz<br/>Didaktik der Physik</p>
		<a href="https://www.didaktik.physik.uni-muenchen.de"> LMU München</a>
		<p style="text-align: center">------------------------</p>
		<p style="text-align: center"> Für Lehre und <br/>Unterricht frei </p>			
		</div>	
	</li>
	
	<li><a href="#" id="m10" onclick="idgeben('m10')" onmouseover="mopen('m1')" onmouseout="mclosetime()">Ladungen</a> 	
		<div id="m1" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
		<p style="text-align: center">------------------------</p>
		<a href="#" onclick='l_post(1)'> pos. Ladung setzen </a>
		<p style="text-align: center">------------------------</p>
		<a href="#" onclick='l_post(-1)'> neg. Ladung setzen </a>
		<p style="text-align: center">------------------------</p>
		<a href="#" onclick='ldg_loeschen()'> Ladung löschen </a>
		<p style="text-align: center">------------------------</p>			
		<a href="#" onclick='l_neukonfig()'> neu konfigurieren </a>
		</div>
	</li>
	<li><a href="#" id="m20" onclick="idgeben('m20')" onmouseover="mopen('m2')" onmouseout="mclosetime()">Feldlinien</a> 	
		<div id="m2" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
		<p style="text-align: center">------------------------</p>
		<a href="#" onclick='Feldlinien()'>  &nbsp;  &nbsp; &nbsp; Feldlinien </a>
		<p style="text-align: center">------------------------</p>
		<a href="#" onclick='linie_starten(true, "Feldlinie")'> &nbsp; Feldlinien durch Maus </a>
		<p style="text-align: center">------------------------</p>
		<a href="#" onclick='l_alles_zeichnen("neu")'> &nbsp; Zeichnungen löschen </a>
		<p style="text-align: center">------------------------</p>
		<a href="#" onclick='ueberlagern()'>Zusatzladung überlagern (!)</a>
		</div>
	</li>
	<li><a href="#" id="m30" onclick="idgeben('m30')" onmouseover="mopen('m3')" onmouseout="mclosetime()" >"Richtungsfeld"</a>
		<div id="m3" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
		<p style="text-align: center">------------------------</p>
		<a href="#" onclick='Richtungsfeld()'> &nbsp; Fähnchen </a>
		<p style="text-align: center">------------------------</p>
		<a href="#" onclick='l_alles_zeichnen("neu")'> Zeichnungen löschen </a>
		</div>
	</li>
	<li><a href="#" id="m40" onclick="idgeben('m40')" onmouseover="mopen('m4')" onmouseout="mclosetime()">Potential</a>
		<div id="m4" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
		<p style="text-align: center">------------------------</p>
		<a href="#" onclick='linie_starten(false, "Potlinie")'> &nbsp; Äquipotentiallinie </a>
		<p style="text-align: center">------------------------</p>
		<a href="#" onclick='Potentialfeld( 2 )'> Fläche färben </a>
		<a href="#" onclick='Potentialfeld( 3 )'> Fläche grob färben (schnell)</a>
		<a href="#" onclick='Potentialfeld( 1 )'> Fläche dicht färben (langsam)</a>
		<p style="text-align: center">------------------------</p>
		<a href="#" onclick='l_alles_zeichnen("neu")'> Zeichnungen löschen </a>
		</div>
	</li>
	<li><a href="#" id="m50" onclick="idgeben('m50')" onmouseover="mopen('m5')" onmouseout="mclosetime()">Potential 3D</a>
		<div id="m5" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
		<p style="text-align: center">------------------------</p>
		<a href="#" onclick='pot3D_0(10, 15)'>  &nbsp; Potential 3D </a>
		<p style="text-align: center">------------------------</p>
		<a href="#" onclick='pot3D_var(5,0)'>  &nbsp; drehen &nbsp;	&nbsp; 	&nbsp; &rarr;  </a>
		<a href="#" onclick='pot3D_var(-5,0)'>  &nbsp; drehen &nbsp;	&nbsp; 	&nbsp; &larr; </a>
		<p style="text-align: center">------------------------</p>
		<a href="#" onclick='pot3D_var(0,5)'>  &nbsp; drehen &nbsp;	&nbsp; 	&nbsp;    &uarr;  </a>
		<a href="#" onclick='pot3D_var(0,-5)'>  &nbsp; drehen &nbsp;	&nbsp; 	&nbsp;    &darr; </a>
		<p style="text-align: center">------------------------</p>
		<a href="#" onclick='l_alles_zeichnen("neu")'> Zeichnungen löschen </a>
		</div>
	</li>
	<li><a href="#" id="m70" onclick="idgeben('m70')" onmouseover="mopen('m7')" onmouseout="mclosetime()">Einstellungen</a> 	
		<div id="m7" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
		<p style="text-align: center">------------------------</p>
		<a href="#" onclick='maus_feldstaerke()'>Wert von E anzeigen</a>
		<p style="text-align: center">------------------------</p>
		<a href="#" onclick='farbflag_setzen()'>Linien: Farbe - SW</a>
		<p style="text-align: center">------------------------</p>
		<a href="#" onclick='l_alles_zeichnen("neu")'> Zeichnungen löschen </a>
		</div>
	</li>
</ul>

   <div style="clear:both"></div>
   <hr />
   <div>  <canvas id="MyCanvas" width="1000" height="600" > </canvas>   
    </div>
    </div>
</body>
</html>